## Linux 进程初探

### 查看程序的线性地址

```c
#include <stdlib.h>
#include <stdio.h>
// 说明main并不是最先运行的函数
static void __attribute__((constructor)) before_main(void)
{
    printf("在main之前\n");
}
int main(){
    printf("main\n");
    return 0;
}
```

然后可以使用如下工具查看堆栈信息：

``` shell
strace ./test
objdump -d ./test
```

### 验证systeam调用进程的关系

编写如下程序

```c
// test1.c
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <sys/types.h>

int x = 100;
int main(int argc,char* argv[]){
    int y = 0;
    static int w = 33;
    printf("test1:pid=%d,ppid=%d\n",getpid(),getppid());
    for (int i = 0; i < argc; i++)
    {
        printf("%d : %s \n",i, argv[i]);
    }

    printf("test1:address x= %ld,y = %ld,w=%ld\n",&x,&y,&w);
    sleep(5);//适当加长可以区查看进程信息
    return 0;
}

// caller.c
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <sys/types.h>

int main(int argc, char const *argv[])
{
    int ret;
    printf("caller:pid=%d,ppid=%d\n",getpid(),getppid());
    ret = system("/home/hwj/Documents/LinuxProgram/week9/code/test1 123 456 abc");
    printf("after calling\n");
    sleep(15);
    return 0;
}

```

